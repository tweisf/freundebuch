<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Freundebuch</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<style>
body{margin:0;font-family:system-ui;background:#0f172a;color:#f8fafc}
main{max-width:820px;margin:auto;padding:20px}
.card{background:#020617;border:1px solid #1e293b;border-radius:16px;padding:16px;margin-bottom:16px}
label{font-size:13px;color:#94a3b8}
input,select,textarea,button{
  width:100%;padding:12px;margin-top:6px;margin-bottom:12px;
  border-radius:12px;border:1px solid #334155;
  background:#020617;color:#f8fafc
}
button{background:linear-gradient(135deg,#6366f1,#22d3ee);border:none;font-weight:800}
.entry{border:1px solid #1e293b;border-radius:16px;padding:14px;margin-top:14px}
.q{color:#94a3b8;font-size:13px;margin-top:10px}
.backLink{
  position:fixed;top:12px;left:12px;font-size:13px;
  color:#94a3b8;text-decoration:none;padding:6px 8px;
  border-radius:8px;background:rgba(2,6,23,.6);
  border:1px solid #1e293b
}
.adminDot{
  position:fixed;right:10px;bottom:10px;width:12px;height:12px;
  border-radius:50%;background:#334155;opacity:.5
}
</style>
</head>

<body>
<a href="index.html" class="backLink">‚Üê zur√ºck</a>

<main>
<h1>üìò Freundebuch</h1>

<div class="card">
  <label>Name *</label><input id="fb_name">
  <label>Woher kennen wir uns? *</label><input id="fb_kennen">
  <label>Wie lange kennen wir uns? *</label><input id="fb_dauer">
  <label>3 Worte *</label><input id="fb_worte">
  <label>Emoji *</label><input id="fb_emoji">
  <button onclick="save()">Eintrag speichern</button>
</div>

<div id="entries"></div>
</main>

<a href="admin.html" class="adminDot"></a>

<script>
const firebaseConfig = {
  apiKey:"AIzaSyCLnz3t9VcQJLg2oqbZd2cA7-hXF30UyHM",
  authDomain:"freundebuch-neu.firebaseapp.com",
  projectId:"freundebuch-neu",
  storageBucket:"freundebuch-neu.firebasestorage.app",
  messagingSenderId:"732597691942",
  appId:"1:732597691942:web:2c116f530c4179d1c2a8e7"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();

async function save(){
  await db.collection("entries").add({
    type:"freundebuch",
    created:new Date(),
    answers:{
      name:fb_name.value,
      kennen:fb_kennen.value,
      dauer:fb_dauer.value,
      worte:fb_worte.value,
      emoji:fb_emoji.value
    }
  });
  load();
}

async function load(){
  const snap=await db.collection("entries").orderBy("created","desc").get();
  entries.innerHTML=snap.docs
    .map(d=>d.data())
    .filter(d=>d.type==="freundebuch")
    .map(d=>`
      <div class="entry">
        <b>${d.answers.name}</b>
        <div class="q">Woher</div>${d.answers.kennen}
        <div class="q">Wie lange</div>${d.answers.dauer}
        <div class="q">3 Worte</div>${d.answers.worte}
        <div class="q">Emoji</div>${d.answers.emoji}
      </div>
    `).join("");
}
load();
</script>
</body>
</html>